<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jsftl/core"
      xmlns:p="http://primefaces.org/ui">
   
   <h:head>
	   <meta charset="utf-8"/>
	   <meta name="viewport" content="width=device.width, initial-sacle=1"/>
	   <meta http-equiv="X-UA-Conpatible" content="IE=edge"/>
	  
	   <h:outputStylesheet library="css" name="bootstrap.min.css"></h:outputStylesheet>
	   
	  
	 <h:outputStylesheet library="css" name="productlist.css"></h:outputStylesheet>
	 
		   <h:outputStylesheet library="css" name="detail.css"></h:outputStylesheet>
	
	   <h:outputScript library="js" name="jquery-3.5.1.min.js"></h:outputScript>
	   <h:outputScript library="js" name="bootstrap.min.js"></h:outputScript>
		
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>

	 

	</h:head>
	
	<h:body>
	
		<ui:param name="p" value="#{ProductController.getProductById(param['id'])}" />
	
		
		
			<nav class="navbar navbar-expand-md navbar-light" style="background-color: #efefef5e !important;" >
	
				  <a class="navbar-brand" style="font-family: 'Garamond', sans-serif;" href="#!">
				    <img src="https://www.univ-gustave-eiffel.fr/fileadmin/templates/UGE/assets/img/logo/logoRS-UGE.png"  height="30" alt="mdb logo"/>
				    
				  	 Eiffel Corp Project
				  </a>
	
				 <div class="collapse navbar-collapse">
			
				    <!-- Right -->
				    <ul class="navbar-nav ml-auto" >
				      <li class="nav-item" >
				        <h:form id="form2">
				         <h:link outcome = "cart.xhtml" styleClass="nav-link navbar-link-2 waves-effect" id="cartcontainer">
				         	<span class="badge badge-danger badge-pill"><h:outputText id="cartsize" value="#{ProductController.getCartSize()}"></h:outputText></span>
				         	  <i class="fa fa-shopping-cart"></i>
				         </h:link> 
				      </h:form>
				      </li>
				      <li class="nav-item">
				        <h:link value = "Shop" outcome ="productlist.xhtml" styleClass="nav-link waves-effect" /> 
				      </li>
				      <li class="nav-item">
				        <h:link value = "Contact" outcome = "contact.xhtml" styleClass="nav-link waves-effect" /> 
				      </li>
				    </ul>
				
			  </div>
			</nav>
			
			
	
			<!--Section: Block Content-->
	<section class="mb-5" style="margin-top: 35px;">
	
	
	  <div class="row">
	    <div class="col-md-4 mb-4 mb-md-0">
	
	      <div id="mdb-lightbox-ui"></div>
	
	      <div class="mdb-lightbox">
	
	        <div class="row">
					
	         
	              <div class="col-12">
	            <figure class="view overlay rounded z-depth-1 main-img">
	               
	              <h:graphicImage library="images" name="#{p.imageUrl}" styleClass="img-fluid"/>
	            </figure>
	       		</div>
	       		</div>
	          </div>
	          
	
	   
	
	    </div>
	    
	  
	    <div class="col-md-8">
	
	      
	
	      
	      <h4>#{p.brand} #{p.model}</h4>
	      <hr/>
	      <p class="mb-2 text-muted text-uppercase small">Car rating</p>
	         <div class="stars">
			  	<ui:repeat var="r" value="#{ProductController.getRatingArray(p.getId())}">
				
			   
			    <input class="star star-1" id="star-1" type="checkbox" name="star" checked="true" disabled="true"  />
			    <label class="star star-1" for="star-1"></label>
			   
			 </ui:repeat>
		
		</div>
	
	      <hr/>
	      <h5>Description :</h5>
	      <p class="pt-1">#{p.description}</p>
	      <hr/>
	      <div class="table-responsive">
	        <table class="table table-sm table-borderless mb-0">
	          <tbody>
	           <tr>
	              <th class="pl-0 w-25" scope="row"><strong>Brand</strong></th>
	              <td>#{p.brand}</td>
	            </tr>
	            <tr>
	              <th class="pl-0 w-25" scope="row"><strong>Model</strong></th>
	              <td>#{p.model}</td>
	            </tr>
	            <tr>
	              <th class="pl-0 w-25" scope="row"><strong>Color</strong></th>
	              <td>#{p.color}</td>
	            </tr>
	            <tr>
	              <th class="pl-0 w-25" scope="row"><strong>Horse Power</strong></th>
	              <td>#{p.horsePower}</td>
	            </tr>
	            <tr>
	              <th class="pl-0 w-25" scope="row"><strong>Type</strong></th>
	              <td>#{p.type}</td>
	            </tr>
	             <tr>
	              <th class="pl-0 w-25" scope="row"><strong>Price</strong></th>
	              <td><strong>#{p.getPrice()*ProductController.rate} #{ProductController.symbol}</strong></td>
	            </tr>
	          </tbody>
	        </table>
	      </div>
	     			<h:form>
	             <div class="col-12" style="left:0;bottom:0;">
	                  <hr/>
		         	
			    
			     <span><h:link outcome="productlist.xhtml" styleClass="btn btn-info">
			    	<i class="fa fa-arrow-left"></i> Back to shop
			      
			      </h:link>
			      </span>
			      
			      <span><h:commandLink action="#{ProductController.addToCart(p)}" styleClass="btn btn-success">
			      <i class="fa fa-shopping-cart pr-2"></i> Add to cart
			      <f:ajax execute="@form" render=":form2:cartsize"></f:ajax>
			      </h:commandLink>
			      </span>
			       
			     
			     	 	
		       </div>
		      </h:form>
	       
	       
	       </div>
	       
	     
	       
	    
	     </div>
		  
	  	
	 
	       
	      <div class="Content">
	      
	      <div class="container">
			
			<ui:repeat var="f" value="#{ProductController.getProductFeedBack(p.getId())}">
				<div class="card">
			    <div class="card-body">
			        <div class="row">
		        	    <div class="col-md-2">
		        	       
		        	        <h:graphicImage library="images" name="employee.png" styleClass="img img-rounded img-fluid"/>
		        	    </div>
		        	    <div class="col-md-10">
		        	        <p>
		        	            <strong>#{f.employeeLastName} #{f.employeeFirstName}</strong>
		        	            
								
		        	           <span class="float-right">  <strong>#{f.rating} </strong> <i class="text-warning fa fa-star"></i> <strong> / 5 </strong></span>
								
		        	       </p>
		        	       <div class="clearfix"></div>
		        	        <p>#{f.description}</p>
	
		        	    </div>
			        </div>
			    </div>
			</div>
			
			</ui:repeat>


		</div>
		</div>
	    
	     
	 
	
	</section>
				
				
	</h:body>
	
</html>